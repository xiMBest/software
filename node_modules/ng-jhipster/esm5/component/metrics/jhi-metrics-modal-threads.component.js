import { __decorate } from "tslib";
/*
 Copyright 2013-2020 the original author or authors from the JHipster project.

 This file is part of the JHipster project, see https://www.jhipster.tech/
 for more information.

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

 http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
 */
import { Component } from '@angular/core';
import { NgbActiveModal } from '@ng-bootstrap/ng-bootstrap';
var JhiThreadModalComponent = /** @class */ (function () {
    function JhiThreadModalComponent(activeModal) {
        this.activeModal = activeModal;
        this.threadDumpAll = 0;
        this.threadDumpBlocked = 0;
        this.threadDumpRunnable = 0;
        this.threadDumpTimedWaiting = 0;
        this.threadDumpWaiting = 0;
    }
    JhiThreadModalComponent.prototype.ngOnInit = function () {
        var _this = this;
        this.threadDump.forEach(function (value) {
            if (value.threadState === 'RUNNABLE') {
                _this.threadDumpRunnable += 1;
            }
            else if (value.threadState === 'WAITING') {
                _this.threadDumpWaiting += 1;
            }
            else if (value.threadState === 'TIMED_WAITING') {
                _this.threadDumpTimedWaiting += 1;
            }
            else if (value.threadState === 'BLOCKED') {
                _this.threadDumpBlocked += 1;
            }
        });
        this.threadDumpAll = this.threadDumpRunnable + this.threadDumpWaiting + this.threadDumpTimedWaiting + this.threadDumpBlocked;
    };
    JhiThreadModalComponent.prototype.getBadgeClass = function (threadState) {
        if (threadState === 'RUNNABLE') {
            return 'badge-success';
        }
        else if (threadState === 'WAITING') {
            return 'badge-info';
        }
        else if (threadState === 'TIMED_WAITING') {
            return 'badge-warning';
        }
        else if (threadState === 'BLOCKED') {
            return 'badge-danger';
        }
    };
    JhiThreadModalComponent.ctorParameters = function () { return [
        { type: NgbActiveModal }
    ]; };
    JhiThreadModalComponent = __decorate([
        Component({
            selector: 'jhi-thread-modal',
            template: "\n        <div class=\"modal-header\">\n            <h4 class=\"modal-title\" jhiTranslate=\"metrics.jvm.threads.dump.title\">Threads dump</h4>\n            <button type=\"button\" class=\"close\" (click)=\"activeModal.dismiss('closed')\">&times;</button>\n        </div>\n        <div class=\"modal-body\">\n            <span class=\"badge badge-primary\" (click)=\"threadDumpFilter = {}\">\n                All&nbsp;<span class=\"badge badge-pill badge-default\">{{ threadDumpAll }}</span> </span\n            >&nbsp;\n            <span class=\"badge badge-success\" (click)=\"threadDumpFilter = { threadState: 'RUNNABLE' }\">\n                Runnable&nbsp;<span class=\"badge badge-pill badge-default\">{{ threadDumpRunnable }}</span> </span\n            >&nbsp;\n            <span class=\"badge badge-info\" (click)=\"threadDumpFilter = { threadState: 'WAITING' }\"\n                >Waiting&nbsp;<span class=\"badge badge-pill badge-default\">{{ threadDumpWaiting }}</span></span\n            >&nbsp;\n            <span class=\"badge badge-warning\" (click)=\"threadDumpFilter = { threadState: 'TIMED_WAITING' }\">\n                Timed Waiting&nbsp;<span class=\"badge badge-pill badge-default\">{{ threadDumpTimedWaiting }}</span> </span\n            >&nbsp;\n            <span class=\"badge badge-danger\" (click)=\"threadDumpFilter = { threadState: 'BLOCKED' }\"\n                >Blocked&nbsp;<span class=\"badge badge-pill badge-default\">{{ threadDumpBlocked }}</span></span\n            >&nbsp;\n            <div class=\"mt-2\">&nbsp;</div>\n            Filter\n            <input type=\"text\" [(ngModel)]=\"threadDumpFilter\" class=\"form-control\" />\n            <div class=\"pad\" *ngFor=\"let entry of (threadDump | pureFilter: threadDumpFilter:'lockName' | keys)\">\n                <h6>\n                    <span class=\"badge\" [ngClass]=\"getBadgeClass(entry.value.threadState)\">{{ entry.value.threadState }}</span\n                    >&nbsp;{{ entry.value.threadName }}\n                    (ID\n                    {{ entry.value.threadId }})\n                    <a (click)=\"entry.show = !entry.show\" href=\"javascript:void(0);\">\n                        <span [hidden]=\"entry.show\" jhiTranslate=\"metrics.jvm.threads.dump.show\">Show StackTrace</span>\n                        <span [hidden]=\"!entry.show\" jhiTranslate=\"metrics.jvm.threads.dump.hide\">Hide StackTrace</span>\n                    </a>\n                </h6>\n                <div class=\"card\" [hidden]=\"!entry.show\">\n                    <div class=\"card-body\">\n                        <div *ngFor=\"let st of (entry.value.stackTrace | keys)\" class=\"break\">\n                            <samp\n                                >{{ st.value.className }}.{{ st.value.methodName }}(<code\n                                    >{{ st.value.fileName }}:{{ st.value.lineNumber }}</code\n                                >)</samp\n                            >\n                            <span class=\"mt-1\"></span>\n                        </div>\n                    </div>\n                </div>\n                <table class=\"table table-sm table-responsive\">\n                    <thead>\n                        <tr>\n                            <th jhiTranslate=\"metrics.jvm.threads.dump.blockedtime\">Blocked Time</th>\n                            <th jhiTranslate=\"metrics.jvm.threads.dump.blockedcount\">Blocked Count</th>\n                            <th jhiTranslate=\"metrics.jvm.threads.dump.waitedtime\">Waited Time</th>\n                            <th jhiTranslate=\"metrics.jvm.threads.dump.waitedcount\">Waited Count</th>\n                            <th jhiTranslate=\"metrics.jvm.threads.dump.lockname\">Lock Name</th>\n                        </tr>\n                    </thead>\n                    <tbody>\n                        <tr>\n                            <td>{{ entry.value.blockedTime }}</td>\n                            <td>{{ entry.value.blockedCount }}</td>\n                            <td>{{ entry.value.waitedTime }}</td>\n                            <td>{{ entry.value.waitedCount }}</td>\n                            <td class=\"thread-dump-modal-lock\" title=\"{{ entry.value.lockName }}\">\n                                <code>{{ entry.value.lockName }}</code>\n                            </td>\n                        </tr>\n                    </tbody>\n                </table>\n            </div>\n        </div>\n        <div class=\"modal-footer\">\n            <button type=\"button\" class=\"btn btn-secondary float-left\" data-dismiss=\"modal\" (click)=\"activeModal.dismiss('closed')\">\n                Done\n            </button>\n        </div>\n    "
        })
    ], JhiThreadModalComponent);
    return JhiThreadModalComponent;
}());
export { JhiThreadModalComponent };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiamhpLW1ldHJpY3MtbW9kYWwtdGhyZWFkcy5jb21wb25lbnQuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9uZy1qaGlwc3Rlci8iLCJzb3VyY2VzIjpbImNvbXBvbmVudC9tZXRyaWNzL2poaS1tZXRyaWNzLW1vZGFsLXRocmVhZHMuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFBQTs7Ozs7Ozs7Ozs7Ozs7Ozs7R0FpQkc7QUFDSCxPQUFPLEVBQUUsU0FBUyxFQUFVLE1BQU0sZUFBZSxDQUFDO0FBQ2xELE9BQU8sRUFBRSxjQUFjLEVBQUUsTUFBTSw0QkFBNEIsQ0FBQztBQWtGNUQ7SUFTSSxpQ0FBbUIsV0FBMkI7UUFBM0IsZ0JBQVcsR0FBWCxXQUFXLENBQWdCO1FBTjlDLGtCQUFhLEdBQUcsQ0FBQyxDQUFDO1FBQ2xCLHNCQUFpQixHQUFHLENBQUMsQ0FBQztRQUN0Qix1QkFBa0IsR0FBRyxDQUFDLENBQUM7UUFDdkIsMkJBQXNCLEdBQUcsQ0FBQyxDQUFDO1FBQzNCLHNCQUFpQixHQUFHLENBQUMsQ0FBQztJQUUyQixDQUFDO0lBRWxELDBDQUFRLEdBQVI7UUFBQSxpQkFjQztRQWJHLElBQUksQ0FBQyxVQUFVLENBQUMsT0FBTyxDQUFDLFVBQUEsS0FBSztZQUN6QixJQUFJLEtBQUssQ0FBQyxXQUFXLEtBQUssVUFBVSxFQUFFO2dCQUNsQyxLQUFJLENBQUMsa0JBQWtCLElBQUksQ0FBQyxDQUFDO2FBQ2hDO2lCQUFNLElBQUksS0FBSyxDQUFDLFdBQVcsS0FBSyxTQUFTLEVBQUU7Z0JBQ3hDLEtBQUksQ0FBQyxpQkFBaUIsSUFBSSxDQUFDLENBQUM7YUFDL0I7aUJBQU0sSUFBSSxLQUFLLENBQUMsV0FBVyxLQUFLLGVBQWUsRUFBRTtnQkFDOUMsS0FBSSxDQUFDLHNCQUFzQixJQUFJLENBQUMsQ0FBQzthQUNwQztpQkFBTSxJQUFJLEtBQUssQ0FBQyxXQUFXLEtBQUssU0FBUyxFQUFFO2dCQUN4QyxLQUFJLENBQUMsaUJBQWlCLElBQUksQ0FBQyxDQUFDO2FBQy9CO1FBQ0wsQ0FBQyxDQUFDLENBQUM7UUFFSCxJQUFJLENBQUMsYUFBYSxHQUFHLElBQUksQ0FBQyxrQkFBa0IsR0FBRyxJQUFJLENBQUMsaUJBQWlCLEdBQUcsSUFBSSxDQUFDLHNCQUFzQixHQUFHLElBQUksQ0FBQyxpQkFBaUIsQ0FBQztJQUNqSSxDQUFDO0lBRUQsK0NBQWEsR0FBYixVQUFjLFdBQVc7UUFDckIsSUFBSSxXQUFXLEtBQUssVUFBVSxFQUFFO1lBQzVCLE9BQU8sZUFBZSxDQUFDO1NBQzFCO2FBQU0sSUFBSSxXQUFXLEtBQUssU0FBUyxFQUFFO1lBQ2xDLE9BQU8sWUFBWSxDQUFDO1NBQ3ZCO2FBQU0sSUFBSSxXQUFXLEtBQUssZUFBZSxFQUFFO1lBQ3hDLE9BQU8sZUFBZSxDQUFDO1NBQzFCO2FBQU0sSUFBSSxXQUFXLEtBQUssU0FBUyxFQUFFO1lBQ2xDLE9BQU8sY0FBYyxDQUFDO1NBQ3pCO0lBQ0wsQ0FBQzs7Z0JBNUIrQixjQUFjOztJQVRyQyx1QkFBdUI7UUFoRm5DLFNBQVMsQ0FBQztZQUNQLFFBQVEsRUFBRSxrQkFBa0I7WUFDNUIsUUFBUSxFQUFFLHluSkE0RVQ7U0FDSixDQUFDO09BQ1csdUJBQXVCLENBc0NuQztJQUFELDhCQUFDO0NBQUEsQUF0Q0QsSUFzQ0M7U0F0Q1ksdUJBQXVCIiwic291cmNlc0NvbnRlbnQiOlsiLypcbiBDb3B5cmlnaHQgMjAxMy0yMDIwIHRoZSBvcmlnaW5hbCBhdXRob3Igb3IgYXV0aG9ycyBmcm9tIHRoZSBKSGlwc3RlciBwcm9qZWN0LlxuXG4gVGhpcyBmaWxlIGlzIHBhcnQgb2YgdGhlIEpIaXBzdGVyIHByb2plY3QsIHNlZSBodHRwczovL3d3dy5qaGlwc3Rlci50ZWNoL1xuIGZvciBtb3JlIGluZm9ybWF0aW9uLlxuXG4gTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG5cbiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcblxuIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5pbXBvcnQgeyBDb21wb25lbnQsIE9uSW5pdCB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgTmdiQWN0aXZlTW9kYWwgfSBmcm9tICdAbmctYm9vdHN0cmFwL25nLWJvb3RzdHJhcCc7XG5cbkBDb21wb25lbnQoe1xuICAgIHNlbGVjdG9yOiAnamhpLXRocmVhZC1tb2RhbCcsXG4gICAgdGVtcGxhdGU6IGBcbiAgICAgICAgPGRpdiBjbGFzcz1cIm1vZGFsLWhlYWRlclwiPlxuICAgICAgICAgICAgPGg0IGNsYXNzPVwibW9kYWwtdGl0bGVcIiBqaGlUcmFuc2xhdGU9XCJtZXRyaWNzLmp2bS50aHJlYWRzLmR1bXAudGl0bGVcIj5UaHJlYWRzIGR1bXA8L2g0PlxuICAgICAgICAgICAgPGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgY2xhc3M9XCJjbG9zZVwiIChjbGljayk9XCJhY3RpdmVNb2RhbC5kaXNtaXNzKCdjbG9zZWQnKVwiPiZ0aW1lczs8L2J1dHRvbj5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJtb2RhbC1ib2R5XCI+XG4gICAgICAgICAgICA8c3BhbiBjbGFzcz1cImJhZGdlIGJhZGdlLXByaW1hcnlcIiAoY2xpY2spPVwidGhyZWFkRHVtcEZpbHRlciA9IHt9XCI+XG4gICAgICAgICAgICAgICAgQWxsJm5ic3A7PHNwYW4gY2xhc3M9XCJiYWRnZSBiYWRnZS1waWxsIGJhZGdlLWRlZmF1bHRcIj57eyB0aHJlYWREdW1wQWxsIH19PC9zcGFuPiA8L3NwYW5cbiAgICAgICAgICAgID4mbmJzcDtcbiAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwiYmFkZ2UgYmFkZ2Utc3VjY2Vzc1wiIChjbGljayk9XCJ0aHJlYWREdW1wRmlsdGVyID0geyB0aHJlYWRTdGF0ZTogJ1JVTk5BQkxFJyB9XCI+XG4gICAgICAgICAgICAgICAgUnVubmFibGUmbmJzcDs8c3BhbiBjbGFzcz1cImJhZGdlIGJhZGdlLXBpbGwgYmFkZ2UtZGVmYXVsdFwiPnt7IHRocmVhZER1bXBSdW5uYWJsZSB9fTwvc3Bhbj4gPC9zcGFuXG4gICAgICAgICAgICA+Jm5ic3A7XG4gICAgICAgICAgICA8c3BhbiBjbGFzcz1cImJhZGdlIGJhZGdlLWluZm9cIiAoY2xpY2spPVwidGhyZWFkRHVtcEZpbHRlciA9IHsgdGhyZWFkU3RhdGU6ICdXQUlUSU5HJyB9XCJcbiAgICAgICAgICAgICAgICA+V2FpdGluZyZuYnNwOzxzcGFuIGNsYXNzPVwiYmFkZ2UgYmFkZ2UtcGlsbCBiYWRnZS1kZWZhdWx0XCI+e3sgdGhyZWFkRHVtcFdhaXRpbmcgfX08L3NwYW4+PC9zcGFuXG4gICAgICAgICAgICA+Jm5ic3A7XG4gICAgICAgICAgICA8c3BhbiBjbGFzcz1cImJhZGdlIGJhZGdlLXdhcm5pbmdcIiAoY2xpY2spPVwidGhyZWFkRHVtcEZpbHRlciA9IHsgdGhyZWFkU3RhdGU6ICdUSU1FRF9XQUlUSU5HJyB9XCI+XG4gICAgICAgICAgICAgICAgVGltZWQgV2FpdGluZyZuYnNwOzxzcGFuIGNsYXNzPVwiYmFkZ2UgYmFkZ2UtcGlsbCBiYWRnZS1kZWZhdWx0XCI+e3sgdGhyZWFkRHVtcFRpbWVkV2FpdGluZyB9fTwvc3Bhbj4gPC9zcGFuXG4gICAgICAgICAgICA+Jm5ic3A7XG4gICAgICAgICAgICA8c3BhbiBjbGFzcz1cImJhZGdlIGJhZGdlLWRhbmdlclwiIChjbGljayk9XCJ0aHJlYWREdW1wRmlsdGVyID0geyB0aHJlYWRTdGF0ZTogJ0JMT0NLRUQnIH1cIlxuICAgICAgICAgICAgICAgID5CbG9ja2VkJm5ic3A7PHNwYW4gY2xhc3M9XCJiYWRnZSBiYWRnZS1waWxsIGJhZGdlLWRlZmF1bHRcIj57eyB0aHJlYWREdW1wQmxvY2tlZCB9fTwvc3Bhbj48L3NwYW5cbiAgICAgICAgICAgID4mbmJzcDtcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJtdC0yXCI+Jm5ic3A7PC9kaXY+XG4gICAgICAgICAgICBGaWx0ZXJcbiAgICAgICAgICAgIDxpbnB1dCB0eXBlPVwidGV4dFwiIFsobmdNb2RlbCldPVwidGhyZWFkRHVtcEZpbHRlclwiIGNsYXNzPVwiZm9ybS1jb250cm9sXCIgLz5cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJwYWRcIiAqbmdGb3I9XCJsZXQgZW50cnkgb2YgKHRocmVhZER1bXAgfCBwdXJlRmlsdGVyOiB0aHJlYWREdW1wRmlsdGVyOidsb2NrTmFtZScgfCBrZXlzKVwiPlxuICAgICAgICAgICAgICAgIDxoNj5cbiAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJiYWRnZVwiIFtuZ0NsYXNzXT1cImdldEJhZGdlQ2xhc3MoZW50cnkudmFsdWUudGhyZWFkU3RhdGUpXCI+e3sgZW50cnkudmFsdWUudGhyZWFkU3RhdGUgfX08L3NwYW5cbiAgICAgICAgICAgICAgICAgICAgPiZuYnNwO3t7IGVudHJ5LnZhbHVlLnRocmVhZE5hbWUgfX1cbiAgICAgICAgICAgICAgICAgICAgKElEXG4gICAgICAgICAgICAgICAgICAgIHt7IGVudHJ5LnZhbHVlLnRocmVhZElkIH19KVxuICAgICAgICAgICAgICAgICAgICA8YSAoY2xpY2spPVwiZW50cnkuc2hvdyA9ICFlbnRyeS5zaG93XCIgaHJlZj1cImphdmFzY3JpcHQ6dm9pZCgwKTtcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIFtoaWRkZW5dPVwiZW50cnkuc2hvd1wiIGpoaVRyYW5zbGF0ZT1cIm1ldHJpY3MuanZtLnRocmVhZHMuZHVtcC5zaG93XCI+U2hvdyBTdGFja1RyYWNlPC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gW2hpZGRlbl09XCIhZW50cnkuc2hvd1wiIGpoaVRyYW5zbGF0ZT1cIm1ldHJpY3MuanZtLnRocmVhZHMuZHVtcC5oaWRlXCI+SGlkZSBTdGFja1RyYWNlPC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICA8L2E+XG4gICAgICAgICAgICAgICAgPC9oNj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY2FyZFwiIFtoaWRkZW5dPVwiIWVudHJ5LnNob3dcIj5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNhcmQtYm9keVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiAqbmdGb3I9XCJsZXQgc3Qgb2YgKGVudHJ5LnZhbHVlLnN0YWNrVHJhY2UgfCBrZXlzKVwiIGNsYXNzPVwiYnJlYWtcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c2FtcFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+e3sgc3QudmFsdWUuY2xhc3NOYW1lIH19Lnt7IHN0LnZhbHVlLm1ldGhvZE5hbWUgfX0oPGNvZGVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID57eyBzdC52YWx1ZS5maWxlTmFtZSB9fTp7eyBzdC52YWx1ZS5saW5lTnVtYmVyIH19PC9jb2RlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID4pPC9zYW1wXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwibXQtMVwiPjwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8dGFibGUgY2xhc3M9XCJ0YWJsZSB0YWJsZS1zbSB0YWJsZS1yZXNwb25zaXZlXCI+XG4gICAgICAgICAgICAgICAgICAgIDx0aGVhZD5cbiAgICAgICAgICAgICAgICAgICAgICAgIDx0cj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGggamhpVHJhbnNsYXRlPVwibWV0cmljcy5qdm0udGhyZWFkcy5kdW1wLmJsb2NrZWR0aW1lXCI+QmxvY2tlZCBUaW1lPC90aD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGggamhpVHJhbnNsYXRlPVwibWV0cmljcy5qdm0udGhyZWFkcy5kdW1wLmJsb2NrZWRjb3VudFwiPkJsb2NrZWQgQ291bnQ8L3RoPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0aCBqaGlUcmFuc2xhdGU9XCJtZXRyaWNzLmp2bS50aHJlYWRzLmR1bXAud2FpdGVkdGltZVwiPldhaXRlZCBUaW1lPC90aD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGggamhpVHJhbnNsYXRlPVwibWV0cmljcy5qdm0udGhyZWFkcy5kdW1wLndhaXRlZGNvdW50XCI+V2FpdGVkIENvdW50PC90aD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGggamhpVHJhbnNsYXRlPVwibWV0cmljcy5qdm0udGhyZWFkcy5kdW1wLmxvY2tuYW1lXCI+TG9jayBOYW1lPC90aD5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvdHI+XG4gICAgICAgICAgICAgICAgICAgIDwvdGhlYWQ+XG4gICAgICAgICAgICAgICAgICAgIDx0Ym9keT5cbiAgICAgICAgICAgICAgICAgICAgICAgIDx0cj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGQ+e3sgZW50cnkudmFsdWUuYmxvY2tlZFRpbWUgfX08L3RkPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZD57eyBlbnRyeS52YWx1ZS5ibG9ja2VkQ291bnQgfX08L3RkPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZD57eyBlbnRyeS52YWx1ZS53YWl0ZWRUaW1lIH19PC90ZD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGQ+e3sgZW50cnkudmFsdWUud2FpdGVkQ291bnQgfX08L3RkPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZCBjbGFzcz1cInRocmVhZC1kdW1wLW1vZGFsLWxvY2tcIiB0aXRsZT1cInt7IGVudHJ5LnZhbHVlLmxvY2tOYW1lIH19XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxjb2RlPnt7IGVudHJ5LnZhbHVlLmxvY2tOYW1lIH19PC9jb2RlPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGQ+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L3RyPlxuICAgICAgICAgICAgICAgICAgICA8L3Rib2R5PlxuICAgICAgICAgICAgICAgIDwvdGFibGU+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJtb2RhbC1mb290ZXJcIj5cbiAgICAgICAgICAgIDxidXR0b24gdHlwZT1cImJ1dHRvblwiIGNsYXNzPVwiYnRuIGJ0bi1zZWNvbmRhcnkgZmxvYXQtbGVmdFwiIGRhdGEtZGlzbWlzcz1cIm1vZGFsXCIgKGNsaWNrKT1cImFjdGl2ZU1vZGFsLmRpc21pc3MoJ2Nsb3NlZCcpXCI+XG4gICAgICAgICAgICAgICAgRG9uZVxuICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgIDwvZGl2PlxuICAgIGBcbn0pXG5leHBvcnQgY2xhc3MgSmhpVGhyZWFkTW9kYWxDb21wb25lbnQgaW1wbGVtZW50cyBPbkluaXQge1xuICAgIHRocmVhZER1bXBGaWx0ZXI6IGFueTtcbiAgICB0aHJlYWREdW1wOiBhbnk7XG4gICAgdGhyZWFkRHVtcEFsbCA9IDA7XG4gICAgdGhyZWFkRHVtcEJsb2NrZWQgPSAwO1xuICAgIHRocmVhZER1bXBSdW5uYWJsZSA9IDA7XG4gICAgdGhyZWFkRHVtcFRpbWVkV2FpdGluZyA9IDA7XG4gICAgdGhyZWFkRHVtcFdhaXRpbmcgPSAwO1xuXG4gICAgY29uc3RydWN0b3IocHVibGljIGFjdGl2ZU1vZGFsOiBOZ2JBY3RpdmVNb2RhbCkge31cblxuICAgIG5nT25Jbml0KCkge1xuICAgICAgICB0aGlzLnRocmVhZER1bXAuZm9yRWFjaCh2YWx1ZSA9PiB7XG4gICAgICAgICAgICBpZiAodmFsdWUudGhyZWFkU3RhdGUgPT09ICdSVU5OQUJMRScpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnRocmVhZER1bXBSdW5uYWJsZSArPSAxO1xuICAgICAgICAgICAgfSBlbHNlIGlmICh2YWx1ZS50aHJlYWRTdGF0ZSA9PT0gJ1dBSVRJTkcnKSB7XG4gICAgICAgICAgICAgICAgdGhpcy50aHJlYWREdW1wV2FpdGluZyArPSAxO1xuICAgICAgICAgICAgfSBlbHNlIGlmICh2YWx1ZS50aHJlYWRTdGF0ZSA9PT0gJ1RJTUVEX1dBSVRJTkcnKSB7XG4gICAgICAgICAgICAgICAgdGhpcy50aHJlYWREdW1wVGltZWRXYWl0aW5nICs9IDE7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHZhbHVlLnRocmVhZFN0YXRlID09PSAnQkxPQ0tFRCcpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnRocmVhZER1bXBCbG9ja2VkICs9IDE7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRoaXMudGhyZWFkRHVtcEFsbCA9IHRoaXMudGhyZWFkRHVtcFJ1bm5hYmxlICsgdGhpcy50aHJlYWREdW1wV2FpdGluZyArIHRoaXMudGhyZWFkRHVtcFRpbWVkV2FpdGluZyArIHRoaXMudGhyZWFkRHVtcEJsb2NrZWQ7XG4gICAgfVxuXG4gICAgZ2V0QmFkZ2VDbGFzcyh0aHJlYWRTdGF0ZSkge1xuICAgICAgICBpZiAodGhyZWFkU3RhdGUgPT09ICdSVU5OQUJMRScpIHtcbiAgICAgICAgICAgIHJldHVybiAnYmFkZ2Utc3VjY2Vzcyc7XG4gICAgICAgIH0gZWxzZSBpZiAodGhyZWFkU3RhdGUgPT09ICdXQUlUSU5HJykge1xuICAgICAgICAgICAgcmV0dXJuICdiYWRnZS1pbmZvJztcbiAgICAgICAgfSBlbHNlIGlmICh0aHJlYWRTdGF0ZSA9PT0gJ1RJTUVEX1dBSVRJTkcnKSB7XG4gICAgICAgICAgICByZXR1cm4gJ2JhZGdlLXdhcm5pbmcnO1xuICAgICAgICB9IGVsc2UgaWYgKHRocmVhZFN0YXRlID09PSAnQkxPQ0tFRCcpIHtcbiAgICAgICAgICAgIHJldHVybiAnYmFkZ2UtZGFuZ2VyJztcbiAgICAgICAgfVxuICAgIH1cbn1cbiJdfQ==